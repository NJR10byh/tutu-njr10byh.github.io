(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9a0e6904"],{"0473":function(t,e,a){"use strict";a("1d6e")},1276:function(t,e,a){"use strict";var n=a("d784"),r=a("44e7"),o=a("825a"),c=a("1d80"),i=a("4840"),s=a("8aa5"),l=a("50c4"),d=a("14c3"),u=a("9263"),f=a("d039"),g=[].push,p=Math.min,h=4294967295,m=!f((function(){return!RegExp(h,"y")}));n("split",2,(function(t,e,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var n=String(c(this)),o=void 0===a?h:a>>>0;if(0===o)return[];if(void 0===t)return[n];if(!r(t))return e.call(n,t,o);var i,s,l,d=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,m=new RegExp(t.source,f+"g");while(i=u.call(m,n)){if(s=m.lastIndex,s>p&&(d.push(n.slice(p,i.index)),i.length>1&&i.index<n.length&&g.apply(d,i.slice(1)),l=i[0].length,p=s,d.length>=o))break;m.lastIndex===i.index&&m.lastIndex++}return p===n.length?!l&&m.test("")||d.push(""):d.push(n.slice(p)),d.length>o?d.slice(0,o):d}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var r=c(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,r,a):n.call(String(r),e,a)},function(t,r){var c=a(n,t,this,r,n!==e);if(c.done)return c.value;var u=o(t),f=String(this),g=i(u,RegExp),v=u.unicode,C=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(m?"y":"g"),_=new g(m?u:"^(?:"+u.source+")",C),b=void 0===r?h:r>>>0;if(0===b)return[];if(0===f.length)return null===d(_,f)?[f]:[];var x=0,y=0,I=[];while(y<f.length){_.lastIndex=m?y:0;var w,P=d(_,m?f:f.slice(y));if(null===P||(w=p(l(_.lastIndex+(m?0:y)),f.length))===x)y=s(f,y,v);else{if(I.push(f.slice(x,y)),I.length===b)return I;for(var T=1;T<=P.length-1;T++)if(I.push(P[T]),I.length===b)return I;y=x=w}}return I.push(f.slice(x)),I}]}),!m)},"14c3":function(t,e,a){var n=a("c6b6"),r=a("9263");t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var o=a.call(t,e);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},"1d6e":function(t,e,a){},"79ce":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contract_Container"},[a("t-loading",{attrs:{loading:t.fullScreenloading,text:"加载中...",fullscreen:""}}),a("div",{staticClass:"head-btn"},[a("div",{staticClass:"Type"},[a("el-radio-group",{model:{value:t.contract_type,callback:function(e){t.contract_type=e},expression:"contract_type"}},[a("el-radio-button",{attrs:{label:"进行中"}})],1)],1),a("div",{staticClass:"newin_refresh"},[a("div",{staticClass:"refresh"},[a("t-button",{attrs:{variant:"outline"},on:{click:t.savedContracts}},[a("t-icon",{attrs:{name:"edit"}}),t._v(" 草稿箱 ")],1),a("t-button",{attrs:{variant:"outline"},on:{click:t.deletedContracts}},[a("t-icon",{attrs:{name:"delete"}}),t._v(" 垃圾箱 ")],1)],1)])]),a("t-table",{staticClass:"t_table_style",attrs:{"row-key":"id",columns:t.columns,data:t.tableData,"expanded-row-keys":t.expandedRowKeys,"expanded-row":t.expandedRow,expandOnRowClick:!0,expandIcon:!1,"table-layout":"auto",stripe:"",hover:"",bordered:"",allowResizeColumnWidth:"",loading:t.tableLoading},on:{"expand-change":t.rehandleExpandChange},scopedSlots:t._u([{key:"projectCode",fn:function(e){var n=e.row;return[t._v(" "+t._s(n.projectCode)+" "),a("t-button",{attrs:{variant:"text",theme:"warning",size:"small"},on:{click:function(e){return t.edit_contractCode(n)}}},[a("t-icon",{attrs:{name:"tools"}})],1)]}},{key:"settings",fn:function(e){return[a("div",{staticClass:"settings_buttons"},[["等待上传合同"].includes(e.row.state)?a("t-button",{attrs:{variant:"outline",theme:"primary"},on:{click:t.getPublicNotice_detail}},[a("t-icon",{attrs:{name:"logo-chrome"}}),t._v(" 公示页 ")],1):t._e(),["等待上传合同","等待公示"].includes(e.row.state)?a("t-button",{attrs:{variant:"outline",theme:"primary"},on:{click:function(a){return t.editContract(e.row)}}},[a("t-icon",{attrs:{name:"edit"}}),t._v(" 修改 ")],1):t._e(),"等待上传合同"==e.row.state?a("t-button",{attrs:{variant:"outline",theme:"primary"},on:{click:function(a){return t.deleteContract(e.row)}}},[a("t-icon",{attrs:{name:"delete"}}),t._v(" 删除 ")],1):t._e(),"等待公示"==e.row.state?a("t-button",{attrs:{variant:"outline",theme:"primary"},on:{click:function(a){return t.BeginPublic(e.row)}}},[t._v("开始公示 "),a("t-icon",{attrs:{name:"logo-chrome"}})],1):t._e(),null!=e.row.contractFilingNo&&e.row.hasCashReward&&0==e.row.isCashRewardPublicNotice?a("t-button",{attrs:{variant:"outline",theme:"primary"},on:{click:function(a){return t.rewordPublic(e.row)}}},[t._v("现金奖励公示 "),a("t-icon",{attrs:{name:"logo-chrome"}})],1):t._e(),"等待流程结束"==e.row.state?a("t-button",{attrs:{variant:"outline",theme:"primary"},on:{click:function(a){return t.ConfirmEnd(e.row)}}},[a("t-icon",{attrs:{name:"check-circle"}}),t._v(" 确认流程结束 ")],1):t._e(),["等待上传合同","等待上传到款凭证","等待上传认定清单（备案）","等待生成入账通知单","等待财务处上传发票","等待流程结束"].includes(e.row.state)?a("t-button",{attrs:{variant:"outline",theme:"primary"},on:{click:function(a){return t.file_manage(e.row)}}},[a("t-icon",{attrs:{name:"file"}}),t._v(" 文件管理 ")],1):t._e()],1)]}}])}),a("div",{staticClass:"PagesCurb"},[a("el-pagination",{staticClass:"pages",attrs:{currentPage:t.currentPage,"page-size":20,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentPage}})],1),a("el-dialog",{attrs:{title:"修改合同编号",visible:t.edit_contractCode_dialogFormVisible,width:"30%"},on:{"update:visible":function(e){t.edit_contractCode_dialogFormVisible=e}}},[a("el-form",{ref:"edit_contractCodeForm",attrs:{model:t.edit_contractCode_form,rules:t.edit_contractCode_rules}},[a("el-form-item",{attrs:{label:"合同编号",prop:"projectCode"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.edit_contractCode_form.projectCode,callback:function(e){t.$set(t.edit_contractCode_form,"projectCode",e)},expression:"edit_contractCode_form.projectCode"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("t-button",{staticStyle:{"margin-right":"10px"},attrs:{theme:"default",size:"large"},on:{click:function(e){t.edit_contractCode_dialogFormVisible=!1}}},[t._v(" 取 消 ")]),a("t-button",{attrs:{size:"large"},on:{click:t.confirm_projectCode}},[t._v("确 定")])],1)],1)],1)},r=[],o=a("1da1"),c=a("5530"),i=(a("96cf"),a("ac1f"),a("1276"),a("caad"),a("2f62")),s={data:function(){this.$createElement;return{fullScreenloading:!0,columns:[{colKey:"id",title:"序号"},{colKey:"projectName",title:"合同名称"},{colKey:"projectCode",title:"合同编号"},{colKey:"paName",title:"受让方单位"},{colKey:"state",title:"转化状态"},{colKey:"settings",title:"操作"}],expandedRowKeys:[],expandedRow:function(t,e){var a=e.row;return t("div",[t("b",{style:"color:#99a9bf;"},["合同类别:"]),t("span",{style:"margin-left:10px;"},[a.contractType]),t("br"),t("br"),t("b",{style:"color:#99a9bf"},["转让总金额:"]),t("span",{style:"margin-left:10px;"},[a.totalTransferAmount," 万元"]),t("br"),t("br"),t("b",{style:"color:#99a9bf"},["更新时间:"]),t("span",{style:"margin-left:10px;"},[a.gmtUpdate])])},tableData:[],tableLoading:!0,contract_type:"进行中",edit_contractCode_dialogFormVisible:!1,edit_contractCode_form:{contractInfoId:"",projectCode:""},edit_contractCode_rules:{projectCode:[{required:!0,message:"请填写合同编号",trigger:"blur"}]},total:0,currentPage:1,Page_url:"",file_list:{accounting:{fileDisplayName:"",fileId:"",fileName:"",fileType:"",gmtCreate:""},checklist:{fileDisplayName:"",fileId:"",fileName:"",fileType:"",gmtCreate:""},contract:{fileDisplayName:"",fileId:"",fileName:"",fileType:"",gmtCreate:""},invoice:{fileDisplayName:"",fileId:"",fileName:"",fileType:"",gmtCreate:""},patentList:[],voucherList:[]}}},created:function(){this.refresh()},methods:Object(c["a"])(Object(c["a"])({},Object(i["c"])(["get_files"])),{},{refresh:function(){var t=this;t.tableData=[],t.tableLoading=!0,t.currentPage=1,t.SearchType="",t.SearchType_prepend="查询字段",t.SearchText="",t.contract_type="进行中",console.log(this.$store.state);var e="/contract/getTransferringContractPage?currPage="+t.currentPage+"&size=20";t.Page_url=e,t.getContract(e)},getContract:function(t){var e=this,a=this;a.tableData=[],a.request(t,{},"GET",{}).then((function(t){if(console.log(t.data),a.tableLoading=!1,"success"==t.data.status){a.total=t.data.data.total;for(var n=0;n<t.data.data.records.length;n++){var r={};r.id=n+1,r.arbitrationCommission=t.data.data.records[n].arbitrationCommission,r.contractInfoId=t.data.data.records[n].contractInfoId,r.contractSigningDate=t.data.data.records[n].contractSigningDate,r.contractType=t.data.data.records[n].contractType,r.contractFilingNo=t.data.data.records[n].contractFilingNo,r.disputeSettlementMethod=t.data.data.records[n].disputeSettlementMethod,r.gmtUpdate=t.data.data.records[n].gmtUpdate,r.hasCashReward=t.data.data.records[n].hasCashReward,r.invoicingEnterprise=t.data.data.records[n].invoicingEnterprise,r.isCashRewardPublicNotice=t.data.data.records[n].isCashRewardPublicNotice,r.paAddress=t.data.data.records[n].paAddress,r.paContactEmail=t.data.data.records[n].paContactEmail,r.paContactPerson=t.data.data.records[n].paContactPerson,r.paContactPhone=t.data.data.records[n].paContactPhone,r.paMailingAddress=t.data.data.records[n].paMailingAddress,r.paName=t.data.data.records[n].paName,r.paRepresentative=t.data.data.records[n].paRepresentative,r.patentNum=t.data.data.records[n].patentNum,r.paymentMethod=t.data.data.records[n].paymentMethod,r.pbContactPerson=t.data.data.records[n].pbContactPerson,r.pbImplPatentRight=t.data.data.records[n].pbImplPatentRight,r.pbLicensedPatentRight=t.data.data.records[n].pbLicensedPatentRight,r.projectCode=t.data.data.records[n].projectCode,r.projectName=t.data.data.records[n].projectName,r.publicNoticeTime=t.data.data.records[n].isPublicNotice?r.publicNoticeTime=a.TimeDiffer(t.data.data.records[n].publicNoticeTime):null,r.taxpayerCode=t.data.data.records[n].taxpayerCode,r.totalTransferAmount=t.data.data.records[n].totalTransferAmount,t.data.data.records[n].isPublicNotice?null==t.data.data.records[n].contractFileId?r.state="等待上传合同":0==t.data.data.records[n].voucherNum?r.state="等待上传到款凭证":null==t.data.data.records[n].checklistId?r.state="等待上传认定清单（备案）":null==t.data.data.records[n].accountingInfoId?r.state="等待生成入账通知单":null==t.data.data.records[n].invoiceId?r.state="等待财务处上传发票":t.data.data.records[n].hasCashReward&&!t.data.data.records[n].isCashRewardPublicNotice?r.state="等待现金奖励公示":t.data.data.records[n].isComplete?r.state="流程已结束":r.state="等待流程结束":r.state="等待公示",a.tableData.push(r)}e.$message.success("数据已更新！"),e.fullScreenloading=!1}else e.$message.error(t.data.data.errMsg)})).catch((function(t){console.log(t),a.tableLoading=!1,e.$message.error("出错了！")}))},rehandleExpandChange:function(t){this.expandedRowKeys=t},handleCurrentPage:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e,n.tableLoading=!0,console.log(n.Page_url),r=n.Page_url.split("currPage")[0]+"currPage="+t+"&size"+n.Page_url.split("size")[1],console.log(r),n.tableData=[],n.currentPage=t,a.next=9,n.getContract(r);case 9:case"end":return a.stop()}}),a)})))()},savedContracts:function(){this.$router.push("/save_contract")},deletedContracts:function(){this.$router.push("/delete_contract")},TimeTransfer:function(t){var e=new Date(t),a=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),o=e.getHours(),c=e.getMinutes(),i=e.getSeconds(),s=a+"-";return n<10&&(s+="0"),s+=n+"-",r<10&&(s+="0"),s+=r+" ",o<10&&(s+="0"),s+=o+":",c<10&&(s+="0"),s+=c+":",i<10&&(s+="0"),s+=i,s},TimeDiffer:function(t){var e=this.TimeTransfer(t),a=new Date,n=new Date(e),r=(a-n)/1e3,o=parseInt(r/86400);parseInt(r/3600),parseInt(r%3600/60),parseInt(r%60);return o},seeContract:function(t){console.log(t),"专利权转让"==t.contractType?this.$router.push({path:"/transfer_contract_detail",query:{contractInfoId:t.contractInfoId}}):this.$router.push({path:"/licence_contract_detail",query:{contractInfoId:t.contractInfoId}})},getPublicNotice_detail:function(){window.open("http://cxy.njupt.edu.cn/_s366/gs/list.psp")},editContract:function(t){console.log(t),["专利权转让"].includes(t.contractType)?this.$router.push({path:"/filling_contract_transfer",query:{contractInfoId:t.contractInfoId,type:"edit"}}):this.$router.push({path:"/filling_contract_license",query:{contractInfoId:t.contractInfoId,type:"edit"}})},deleteContract:function(t){var e=this,a=this;console.log(t),this.$confirm("确认要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n="/contract/logicDeleteContract?contractInfoId="+t.contractInfoId;a.request(n,{},"GET",{}).then((function(t){console.log(t.data),"success"==t.data.status?(e.$notify.success({title:"成功",content:"已移至垃圾箱！"}),window.location.reload()):e.$message.error(t.data.data.errMsg)})).catch((function(t){console.log(t),e.$message.error("出错了！")}))})).catch((function(){e.$message.info("已取消操作！")}))},BeginPublic:function(t){var e=this,a=this;console.log(t),a.loading=!0,this.$confirm("确认要开始公示了吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n="/transferring/makePublicNotice?contractInfoId="+t.contractInfoId;a.request(n,{},"GET",{}).then((function(t){console.log(t.data),a.tableLoading=!1,"success"==t.data.status?e.$message.success("开始公示！"):e.$message.error(t.data.data.errMsg)})).catch((function(t){console.log(t),e.$message.error("出错了！")}))})).catch((function(){e.$message.info("已取消操作！")}))},rewordPublic:function(t){var e=this,a="/transferring/makeCashRewardPublicNotice?contractInfoId="+t.contractInfoId;this.fullScreenloading=!0,this.request(a,{},"GET",{}).then((function(t){console.log(t.data),"success"==t.data.status?(e.$message.success("现金奖励公示成功！"),e.fullScreenloading=!1,e.refresh()):e.$message.error(t.data.data.errMsg)})).catch((function(t){console.log(t),e.$message.error("出错了！")}))},file_manage:function(t){var e=this,a=this;console.log(t);var n="/file/getFileListByContractInfoId?contractInfoId="+t.contractInfoId;a.request(n,{},"GET",{}).then((function(t){console.log(t.data),"success"==t.data.status?(e.get_files(t.data.data),sessionStorage.setItem("state",JSON.stringify(e.$store.state)),e.$router.push({path:"./files_controller"})):a.$message.error(t.data.data.errMsg)})).catch((function(t){console.log(t),a.$message.error("出错了！")}))},edit_contractCode:function(t){console.log(t),this.edit_contractCode_form.contractInfoId=t.contractInfoId,this.edit_contractCode_form.projectCode=t.projectCode,this.edit_contractCode_dialogFormVisible=!0},confirm_projectCode:function(){var t=this,e=this;this.$confirm("确认要修改吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a="/contract/updateProjectCode?contractInfoId="+t.edit_contractCode_form.contractInfoId+"&projectCode="+t.edit_contractCode_form.projectCode;e.request(a,{},"GET",{}).then((function(a){console.log(a.data),"success"==a.data.status?(t.$message.success("修改成功！"),e.edit_contractCode_dialogFormVisible=!1,e.edit_contractCode_form.contractInfoId="",e.edit_contractCode_form.projectCode="",window.location.reload()):t.$message.error(a.data.data.errMsg)})).catch((function(e){console.log(e),t.$message.error("出错了！")}))})).catch((function(){t.$message.info("已取消操作！")}))},ConfirmEnd:function(t){var e=this,a=this;this.$confirm("确认要结束流程吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n="/transferring/processComplete?contractInfoId="+t.contractInfoId;a.request(n,{},"GET",{}).then((function(t){"success"==t.data.status?(e.$message.success("流程已结束！"),window.location.reload()):e.$message.error(t.data.data.errMsg)})).catch((function(t){console.log(t),e.$message.error("出错了！")}))})).catch((function(){e.$message.info("已取消操作！")}))}})},l=s,d=(a("0473"),a("2877")),u=Object(d["a"])(l,n,r,!1,null,null,null);e["default"]=u.exports},"8aa5":function(t,e,a){"use strict";var n=a("6547").charAt;t.exports=function(t,e,a){return e+(a?n(t,e).length:1)}},9263:function(t,e,a){"use strict";var n=a("ad6d"),r=a("9f7f"),o=RegExp.prototype.exec,c=String.prototype.replace,i=o,s=function(){var t=/a/,e=/b*/g;return o.call(t,"a"),o.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=r.UNSUPPORTED_Y||r.BROKEN_CARET,d=void 0!==/()??/.exec("")[1],u=s||d||l;u&&(i=function(t){var e,a,r,i,u=this,f=l&&u.sticky,g=n.call(u),p=u.source,h=0,m=t;return f&&(g=g.replace("y",""),-1===g.indexOf("g")&&(g+="g"),m=String(t).slice(u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==t[u.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,h++),a=new RegExp("^(?:"+p+")",g)),d&&(a=new RegExp("^"+p+"$(?!\\s)",g)),s&&(e=u.lastIndex),r=o.call(f?a:u,m),f?r?(r.input=r.input.slice(h),r[0]=r[0].slice(h),r.index=u.lastIndex,u.lastIndex+=r[0].length):u.lastIndex=0:s&&r&&(u.lastIndex=u.global?r.index+r[0].length:e),d&&r&&r.length>1&&c.call(r[0],a,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=i},"9f7f":function(t,e,a){"use strict";var n=a("d039");function r(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=n((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},ac1f:function(t,e,a){"use strict";var n=a("23e7"),r=a("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(t,e,a){"use strict";var n=a("825a");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},d784:function(t,e,a){"use strict";a("ac1f");var n=a("6eeb"),r=a("d039"),o=a("b622"),c=a("9263"),i=a("9112"),s=o("species"),l=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),d=function(){return"$0"==="a".replace(/./,"$0")}(),u=o("replace"),f=function(){return!!/./[u]&&""===/./[u]("a","$0")}(),g=!r((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));t.exports=function(t,e,a,u){var p=o(t),h=!r((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),m=h&&!r((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[s]=function(){return a},a.flags="",a[p]=/./[p]),a.exec=function(){return e=!0,null},a[p](""),!e}));if(!h||!m||"replace"===t&&(!l||!d||f)||"split"===t&&!g){var v=/./[p],C=a(p,""[t],(function(t,e,a,n,r){return e.exec===c?h&&!r?{done:!0,value:v.call(e,a,n)}:{done:!0,value:t.call(a,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),_=C[0],b=C[1];n(String.prototype,t,_),n(RegExp.prototype,p,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}u&&i(RegExp.prototype[p],"sham",!0)}}}]);