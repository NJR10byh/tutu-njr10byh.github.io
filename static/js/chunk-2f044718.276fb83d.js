(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f044718"],{"1c05":function(e,t,a){},"3a48":function(e,t,a){"use strict";a("1c05")},f28b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"invoice_tax_Container"},[a("div",{staticClass:"head-btn"},[a("div",{staticClass:"Type"},[a("el-radio-group",{on:{change:e.type_change},model:{value:e.invoice_tax_type,callback:function(t){e.invoice_tax_type=t},expression:"invoice_tax_type"}},[a("el-radio-button",{attrs:{label:"可生成"}}),a("el-radio-button",{attrs:{label:"已生成"}})],1)],1),["已上传"].includes(e.invoice_tax_type)?a("div",{staticClass:"Search"}):e._e(),a("div",{staticClass:"newin_refresh"},[a("div",{staticClass:"refresh"},[a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.refresh}},[e._v("刷新列表 ")])],1)])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"tablestyle",staticStyle:{width:"100%"},attrs:{id:"outTable",data:e.tableData,"tooltip-effect":"dark",stripe:""}},[a("el-table-column",{attrs:{prop:"index",label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"projectName",label:"合同名称"}}),a("el-table-column",{attrs:{prop:"projectCode",label:"合同编号",width:"120"}}),a("el-table-column",{attrs:{prop:"transferMode",label:"转让方式"}}),a("el-table-column",{attrs:{prop:"setting",label:"操作",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"settings"},[a("el-button",{attrs:{icon:"el-icon-download"},on:{click:function(a){return e.download_tax(t.row)}}},[e._v("生成并下载个人所得税备案表 ")])],1)]}}])})],1),a("div",{staticClass:"PagesCurb"},[a("el-pagination",{staticClass:"pages",attrs:{currentPage:e.currentPage,"page-size":10,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentPage}})],1)],1)},n=[],o=a("1da1"),c=(a("ac1f"),a("1276"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("96cf"),{data:function(){return{tableData:[],loading:!0,invoice_tax_type:"可生成",total:0,currentPage:1,Page_url:"",download_row:{},file_type_Dialog:!1,upload_row:{},upload_content:{type:"",contractInfoId:""}}},created:function(){this.refresh()},methods:{refresh:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,a.tableData=[],a.currentPage=1,console.log(e.$store.state),r="/cwc/getContractListInvoiceIsNull?currPage="+a.currentPage+"&size=20",a.Page_url=r,t.next=8,a.getContract(r);case 8:case"end":return t.stop()}}),t)})))()},getContract:function(e){var t=this,a=this;a.tableData=[],a.request(e,{},"GET",{}).then((function(e){if(console.log(e.data),a.loading=!1,"success"==e.data.status){a.total=e.data.data.total;for(var r=0;r<e.data.data.records.length;r++){var n={};n.index=r+1,n.gmtUpdate=e.data.data.records[r].gmtUpdate,n.projectCode=e.data.data.records[r].projectCode,n.projectName=e.data.data.records[r].projectName,n.transferMode=e.data.data.records[r].transferMode,n.transferApplicationFormId=e.data.data.records[r].transferApplicationFormId,a.tableData.push(n)}t.$message({message:"数据已更新！",type:"success"})}else t.$message({message:e.data.data.errMsg,type:"error"})})).catch((function(e){console.log(e),a.loading=!1,t.$message({message:"出错了！",type:"error"})}))},handleCurrentPage:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t,r.loading=!0,console.log(r.Page_url),n=r.Page_url.split("currPage")[0]+"currPage="+e+"&size"+r.Page_url.split("size")[1],console.log(n),r.tableData=[],r.currentPage=e,a.next=9,r.getContract(n);case 9:case"end":return a.stop()}}),a)})))()},type_change:function(e){console.log(e);var t=this;t.loading=!0,t.tableData=[];var a="";switch(e){case"可生成":a="/cwc/getTaxFilingFormPatentPage?currPage="+t.currentPage+"&size=20";break;case"已生成":a="/cwc/getTaxFilingFormNotNullPatentPage?currPage="+t.currentPage+"&size=20";break;default:break}t.Page_url=a,t.getContract(a)},download_tax:function(e){var t=this,a=this;console.log(e);var r="/cwc/downloadTaxFilingForm?transferApplicationFormId="+e.transferApplicationFormId,n="个人所得税备案表.doc";a.request(r,{},"GET",{},"blob").then((function(e){console.log(e);try{var a=new Blob([e.data],{type:"application/force-download"}),r=URL.createObjectURL(a),o=document.createElement("a");o.href=r,o.setAttribute("download",n),document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch(c){console.log(c),t.$message({message:"数据请求失败！",type:"error"})}})).catch((function(e){console.log(e),t.$message({message:"出错了！",type:"error"})}))}}}),l=c,s=(a("3a48"),a("2877")),i=Object(s["a"])(l,r,n,!1,null,null,null);t["default"]=i.exports}}]);