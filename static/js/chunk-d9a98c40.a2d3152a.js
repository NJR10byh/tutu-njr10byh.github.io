(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d9a98c40"],{"2a79":function(e,t,i){e.exports=i.p+"static/img/file_pdf.1bf2177c.png"},"62a2":function(e,t,i){},e931:function(e,t,i){e.exports=i.p+"static/img/file_word.cdded0c4.png"},f869:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Files_Onlyfile_Container"},[a("div",{staticClass:"top_buttons"},[a("el-button",{attrs:{icon:"el-icon-upload2"},on:{click:e.file_upload}},[e._v("上传合同")]),a("el-button",{attrs:{icon:"el-icon-download"},on:{click:e.List_download}},[e._v(" 打包下载 ")])],1),a("el-table",{ref:"multipleTable",staticClass:"tableStyle",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"file_name",label:"文件名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"filebox"},["accounting"==e.table_type?a("img",{attrs:{src:i("e931")}}):a("img",{attrs:{src:i("2a79")}}),a("a",{on:{click:function(i){return e.downloadFiles(t.row)}}},[e._v(e._s(t.row.file_name))])])]}}])}),a("el-table-column",{attrs:{prop:"fixtime",label:"修改时间"}})],1)],1)},s=[],o=i("5530"),l=(i("ac1f"),i("1276"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("2f62")),c={data:function(){return{table_type:this.$route.query.type,tableData:[],loading:!0,multipleSelection:[],projectCode:this.$store.state.contract_files.projectCode}},created:function(){switch(console.log(this.$route.query),this.$route.query.type){case"contract":if(null!=this.$store.state.contract_files.contract){var e={};e.file_name=this.$store.state.contract_files.contract.fileDisplayName,e.fixtime=this.$store.state.contract_files.contract.gmtCreate,e.fileId=this.$store.state.contract_files.contract.fileId,this.tableData.push(e)}break;case"accounting":if(null!=this.$store.state.contract_files.accounting){var t={};t.file_name=this.$store.state.contract_files.accounting.fileDisplayName,t.fixtime=this.$store.state.contract_files.accounting.gmtCreate,t.fileId=this.$store.state.contract_files.accounting.fileId,this.tableData.push(t)}break;case"checklist":if(null!=this.$store.state.contract_files.checklist){var i={};i.file_name=this.$store.state.contract_files.checklist.fileDisplayName,i.fixtime=this.$store.state.contract_files.checklist.gmtCreate,i.fileId=this.$store.state.contract_files.checklist.fileId,this.tableData.push(i)}break;case"invoice":if(null!=this.$store.state.contract_files.invoice){var a={};a.file_name=this.$store.state.contract_files.invoice.fileDisplayName,a.fixtime=this.$store.state.contract_files.invoice.gmtCreate,a.fileId=this.$store.state.contract_files.invoice.fileId,this.tableData.push(a)}break;default:break}},methods:Object(o["a"])(Object(o["a"])({},Object(l["c"])(["get_files"])),{},{handleSelectionChange:function(e){this.multipleSelection=e},file_upload:function(){this.$message.warning("暂未开放！")},downloadFiles:function(e){var t=this,i=this,a="/file/downloadFileById?fileId="+e.fileId;i.request(a,{},"GET",{},"blob").then((function(e){if(void 0!=e.headers["content-disposition"]){t.$notify({title:"成功",message:"准备开始下载！",type:"success"});var i=decodeURI(e.headers["content-disposition"].split("fileName=")[1]);try{var a=new Blob([e.data],{type:"application/force-download"}),s=URL.createObjectURL(a),o=document.createElement("a");o.href=s,o.setAttribute("download",i),document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch(l){console.log(l),t.$message({message:"数据请求失败！",type:"error"})}}else t.$message({message:"文件可能丢失了！",type:"error"})})).catch((function(e){console.log(e),t.$message({message:"出错了！",type:"error"})}))},List_download:function(){var e=this,t=this;if(console.log(this.multipleSelection),0==this.multipleSelection.length)this.$message.warning("请选择要下载的文件！");else{var i="/file/downloadPackage?projectCode="+this.projectCode+"&fileIdList="+this.multipleSelection[0].fileId;if(this.multipleSelection.length>1)for(var a=1;a<this.multipleSelection.length;a++)i=i+"&fileIdList="+this.multipleSelection[a].fileId;t.request(i,{},"GET",{},"blob").then((function(t){if(void 0!=t.headers["content-disposition"]){e.$notify({title:"成功",message:"准备开始下载！",type:"success"});var i=decodeURI(t.headers["content-disposition"].split("fileName=")[1]);try{var a=new Blob([t.data],{type:"application/force-download"}),s=URL.createObjectURL(a),o=document.createElement("a");o.href=s,o.setAttribute("download",i),document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch(l){console.log(l),e.$message({message:"数据请求失败！",type:"error"})}}else e.$message({message:"文件可能丢失了！",type:"error"})})).catch((function(t){console.log(t),e.$message({message:"出错了！",type:"error"})}))}}})},n=c,r=(i("ffac"),i("2877")),f=Object(r["a"])(n,a,s,!1,null,null,null);t["default"]=f.exports},ffac:function(e,t,i){"use strict";i("62a2")}}]);