(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6193f7ea"],{"2a79":function(e,t,o){e.exports=o.p+"static/img/file_pdf.1bf2177c.png"},"2b24":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"Files_VoucherList_Container"},[i("div",{staticClass:"top_buttons"},[i("el-button",{attrs:{icon:"el-icon-upload2"},on:{click:e.file_upload}},[e._v("上传到款凭证")]),i("el-button",{attrs:{icon:"el-icon-download"},on:{click:e.List_download}},[e._v(" 打包下载 ")])],1),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{prop:"file_name",label:"文件名"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"filebox"},[i("img",{attrs:{src:o("2a79")}}),i("a",{on:{click:function(o){return e.downloadFiles(t.row)}}},[e._v(e._s(t.row.file_name))])])]}}])}),i("el-table-column",{attrs:{prop:"fixtime",label:"修改时间"}})],1)],1)},s=[],l=o("5530"),a=(o("ac1f"),o("1276"),o("d3b7"),o("3ca3"),o("ddb0"),o("2b3d"),o("2f62")),n={data:function(){return{tableData:[],loading:!0,multipleSelection:[],projectCode:this.$store.state.contract_files.projectCode}},created:function(){console.log(this.$store.state);for(var e=0;e<this.$store.state.contract_files.voucherList.length;e++){var t={};t.file_name=this.$store.state.contract_files.voucherList[e].fileDisplayName,t.fixtime=this.$store.state.contract_files.voucherList[e].gmtCreate,t.fileId=this.$store.state.contract_files.voucherList[e].fileId,this.tableData.push(t)}},methods:Object(l["a"])(Object(l["a"])({},Object(a["c"])(["get_files"])),{},{handleSelectionChange:function(e){this.multipleSelection=e},file_upload:function(){this.$message.warning("暂未开放！")},downloadFiles:function(e){var t=this,o=this,i="/file/downloadFileById?fileId="+e.fileId;o.request(i,{},"GET",{},"blob").then((function(e){if(void 0!=e.headers["content-disposition"]){t.$notify({title:"成功",message:"准备开始下载！",type:"success"});var o=decodeURI(e.headers["content-disposition"].split("fileName=")[1]);try{var i=new Blob([e.data],{type:"application/force-download"}),s=URL.createObjectURL(i),l=document.createElement("a");l.href=s,l.setAttribute("download",o),document.body.appendChild(l),l.click(),document.body.removeChild(l)}catch(a){console.log(a),t.$message({message:"数据请求失败！",type:"error"})}}else t.$message({message:"文件可能丢失了！",type:"error"})})).catch((function(e){console.log(e),t.$message({message:"出错了！",type:"error"})}))},List_download:function(){var e=this,t=this;if(console.log(this.multipleSelection),0==this.multipleSelection.length)this.$message.warning("请选择要下载的文件！");else{this.$notify({title:"成功",message:"准备开始下载！",type:"success"});var o="/file/downloadPackage?projectCode="+this.projectCode+"&fileIdList="+this.multipleSelection[0].fileId;if(this.multipleSelection.length>1)for(var i=1;i<this.multipleSelection.length;i++)o=o+"&fileIdList="+this.multipleSelection[i].fileId;t.request(o,{},"GET",{},"blob").then((function(t){if(void 0!=t.headers["content-disposition"]){e.$notify({title:"成功",message:"准备开始下载！",type:"success"});var o=decodeURI(t.headers["content-disposition"].split("fileName=")[1]);try{var i=new Blob([t.data],{type:"application/force-download"}),s=URL.createObjectURL(i),l=document.createElement("a");l.href=s,l.setAttribute("download",o),document.body.appendChild(l),l.click(),document.body.removeChild(l)}catch(a){console.log(a),e.$message({message:"数据请求失败！",type:"error"})}}else e.$message({message:"文件可能丢失了！",type:"error"})})).catch((function(t){console.log(t),e.$message({message:"出错了！",type:"error"})}))}}})},c=n,r=(o("c846"),o("2877")),d=Object(r["a"])(c,i,s,!1,null,null,null);t["default"]=d.exports},"9d8e":function(e,t,o){},c846:function(e,t,o){"use strict";o("9d8e")}}]);