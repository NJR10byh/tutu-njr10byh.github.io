(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6579c912"],{"25f0":function(e,t,a){"use strict";var i=a("6eeb"),n=a("825a"),o=a("d039"),s=a("ad6d"),c="toString",l=RegExp.prototype,r=l[c],d=o((function(){return"/a/b"!=r.call({source:"a",flags:"b"})})),u=r.name!=c;(d||u)&&i(RegExp.prototype,c,(function(){var e=n(this),t=String(e.source),a=e.flags,i=String(void 0===a&&e instanceof RegExp&&!("flags"in l)?s.call(e):a);return"/"+t+"/"+i}),{unsafe:!0})},af2c:function(e,t,a){"use strict";a("ac1f"),a("1276"),a("caad"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d");var i=a("4ec3"),n=a("5c96"),o=a.n(n),s=function(e){var t="/file/downloadFileById?fileId="+e;Object(i["a"])(t,{},"GET",{},"arraybuffer").then((function(e){if(console.log(e),void 0==e.headers["content-disposition"])o.a.Notification({title:"错误",message:"文件可能丢失了！",type:"error"});else{var t="",a=e.headers["content-disposition"].split("fileName=")[1].split(".").length,i=e.headers["content-disposition"].split("fileName=")[1].split(".")[a-1];if(["pdf","png","jpg","jpeg"].includes(i)){switch(i){case"pdf":t="application/pdf";break;case"png":t="image/png";break;case"jpg":t="image/jpeg";break;case"jpeg":t="image/jpeg";break}var n=e.data,s=decodeURI(e.headers["content-disposition"].split("fileName=")[1]);if(window.navigator&&window.navigator.msSaveOrOpenBlob){var c=new Blob([n],{type:t});console.log(s),window.navigator.msSaveOrOpenBlob(c,s)}else{var l=new Blob([n],{type:t}),r=window.URL.createObjectURL(l);console.log(r),window.open(r)}}else o.a.Notification({title:"提示",message:"该文件类型暂不支持在线预览，请下载后查看！",type:"warning"})}})).catch((function(e){console.log(e),o.a.Message({message:"出错了！",type:"error"})}))},c=function(e){Object(i["a"])(e,{},"GET",{},"blob").then((function(t){if(console.log(t),void 0!=t.headers["content-disposition"]){o.a.Notification({title:"成功",message:"准备开始下载！",type:"success"});var a=decodeURI(t.headers["content-disposition"].split("fileName=")[1]);try{var n=new Blob([t.data],{type:"application/force-download"}),s=URL.createObjectURL(n),c=document.createElement("a");c.href=s,c.setAttribute("download",a),document.body.appendChild(c),c.click(),document.body.removeChild(c)}catch(l){console.log(l),o.a.Message({message:"数据请求失败！",type:"error"})}}else Object(i["a"])(e,{},"GET",{}).then((function(e){o.a.Message({message:e.data.data.errMsg,type:"error"})}))})).catch((function(e){console.log(e),o.a.Message({message:"出错了！",type:"error"})}))},l=function(e,t){var a="";if(0==t.length)o.a.Notification.warning({title:"提示",message:"文件为空！"});else{if(1==t.length)a="/file/downloadPackage?projectCode="+e+"&fileIdList="+t[0];else if(t.length>1){a="/file/downloadPackage?projectCode="+e+"&fileIdList="+t[0];for(var n=1;n<t.length;n++)a=a+"&fileIdList="+t[n]}Object(i["a"])(a,{},"GET",{},"blob").then((function(e){if(void 0!=e.headers["content-disposition"]){o.a.Notification({title:"成功",message:"准备开始下载！",type:"success"});var t=decodeURI(e.headers["content-disposition"].split("fileName=")[1]);try{var a=new Blob([e.data],{type:"application/force-download"}),i=URL.createObjectURL(a),n=document.createElement("a");n.href=i,n.setAttribute("download",t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(s){console.log(s),o.a.Message({message:"数据请求失败！",type:"error"})}}else o.a.Message({message:"文件可能丢失了！",type:"error"})})).catch((function(e){console.log(e),o.a.Message({message:"出错了！",type:"error"})}))}};t["a"]={previewFile:s,downloadFiles:c,downloadFilePackage:l}},c613:function(e,t,a){e.exports={menuText:"#bfcbd9",menuActiveText:"#409eff",menuBg:"#304156",sideBarWidth:"200px"}},c6d2:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home_pc_Container"},[["teacher","root"].includes(this.$store.state.signed_authorize)?a("div",{staticClass:"notice_teacher"},[e._m(0),a("div",{staticClass:"carousel"},[a("el-carousel",{ref:"carousel",staticStyle:{margin:"20px 0"},attrs:{height:"500px",autoplay:e.autoplay,interval:e.interval,"initial-index":e.initialIndex}},[a("el-carousel-item",[a("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",staticStyle:{width:"100%",height:"500px"},attrs:{playsinline:!0,options:e.playerOptions,"x5-video-player-fullscreen":!0},on:{play:function(t){return e.onPlayerPlay(t)},ended:function(t){return e.onPlayerEnded(t)},loadeddata:function(t){return e.onPlayerLoadeddata(t)}}})],1)],1)],1),a("div",{staticClass:"Notices"},[a("el-collapse",e._l(e.notices,(function(t){return a("el-collapse-item",{key:t.noticeId,attrs:{title:t.noticeTitle,name:t.noticeId}},[a("div",{staticClass:"notice_content"},[a("div",{staticClass:"content_detail"},[e._v(e._s(t.content))]),a("div",{staticClass:"content_right"},[a("div"),a("div",{staticClass:"content_time"},[e._v("最后更新："+e._s(t.updateTime))])])])])})),1)],1),a("div",{staticClass:"Page"},[a("el-pagination",{attrs:{"current-page":e.current_page,"page-size":5,layout:"total, prev, pager, next",total:e.noticetotal},on:{"current-change":e.handleCurrentChange}})],1)]):e._e(),["root","superadmin","admin"].includes(this.$store.state.signed_authorize)?a("div",{staticClass:"notice_company"},[a("div",{staticClass:"notices_head"},[a("div",{staticClass:"text"},[e._v("通知管理")]),a("div",{staticClass:"buttons"},[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){e.AddNoticeVisible=!0}}},[e._v(" 新增通知 ")])],1)]),a("div",{staticClass:"notices_table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"tablestyle",staticStyle:{width:"100%"},attrs:{data:e.notices,"tooltip-effect":"dark",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",[a("div",{staticClass:"content_detail"},[a("span",[e._v(e._s(t.row.content))])])])],1)]}}],null,!1,468862246)}),a("el-table-column",{attrs:{prop:"index",label:"序号",width:"70"}}),a("el-table-column",{attrs:{prop:"noticeTitle",label:"通知标题"}}),a("el-table-column",{attrs:{prop:"publishUser",label:"发布人"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"最后更新时间"}}),a("el-table-column",{attrs:{prop:"setting",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"setting"},[a("el-button",{attrs:{icon:"el-icon-edit-outline"},on:{click:function(a){return e.FixNotice(t.row)}}},[e._v(" 修改 ")]),a("el-button",{attrs:{icon:"el-icon-delete"},on:{click:function(a){return e.DeleteNotice(t.row)}}},[e._v(" 删除 ")])],1)]}}],null,!1,451242432)})],1)],1),a("div",{staticClass:"Page"},[a("el-pagination",{attrs:{"current-page":e.current_page,"page-size":5,layout:"total, prev, pager, next",total:e.noticetotal},on:{"current-change":e.handleCurrentChange}})],1)]):e._e(),a("el-dialog",{staticClass:"AddNotice_Dialog",attrs:{title:"新增通知",visible:e.AddNoticeVisible,width:"60%"},on:{"update:visible":function(t){e.AddNoticeVisible=t}}},[a("div",{staticClass:"notice_title"},[a("span",[e._v("通知标题：")]),a("el-input",{staticStyle:{"margin-top":"5px"},attrs:{placeholder:"请输入通知标题"},model:{value:e.willadd_notice.noticeTitle,callback:function(t){e.$set(e.willadd_notice,"noticeTitle",t)},expression:"willadd_notice.noticeTitle"}})],1),a("div",{staticClass:"notice_content"},[a("span",[e._v("通知内容：")]),a("el-input",{staticStyle:{"margin-top":"5px"},attrs:{placeholder:"请输入通知内容",type:"textarea",rows:4},model:{value:e.willadd_notice.content,callback:function(t){e.$set(e.willadd_notice,"content",t)},expression:"willadd_notice.content"}})],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"dialog_footer"},[a("div",{staticClass:"upload_document"},[a("el-upload",{ref:"upload",staticClass:"elupload",attrs:{action:"/pdf/upload","http-request":e.upload_document,limit:1,"on-exceed":e.handleExceed}},[a("el-button",{attrs:{icon:"el-icon-upload2"}},[e._v("上传附件")])],1)],1),a("div",{staticClass:"buttons"},[a("el-button",{on:{click:function(t){e.AddNoticeVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.AddConfirm()}}},[e._v("新 增")])],1)])])]),a("el-dialog",{staticClass:"FixNotice_Dialog",attrs:{title:"修改通知",visible:e.FixNoticeVisible,width:"60%"},on:{"update:visible":function(t){e.FixNoticeVisible=t}}},[a("div",{staticClass:"notice_title"},[a("span",[e._v("通知标题：")]),a("el-input",{staticStyle:{"margin-top":"5px"},attrs:{placeholder:"请输入通知标题"},model:{value:e.willfix_notice.noticeTitle,callback:function(t){e.$set(e.willfix_notice,"noticeTitle",t)},expression:"willfix_notice.noticeTitle"}})],1),a("div",{staticClass:"notice_content"},[a("span",[e._v("通知内容：")]),a("el-input",{staticStyle:{"margin-top":"5px"},attrs:{placeholder:"请输入通知内容",type:"textarea",rows:4},model:{value:e.willfix_notice.content,callback:function(t){e.$set(e.willfix_notice,"content",t)},expression:"willfix_notice.content"}})],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"dialog_footer"},[a("div",{staticClass:"update_document"},[a("div",[a("el-upload",{ref:"upload",staticClass:"elupload",attrs:{action:"/pdf/upload","http-request":e.update_document,limit:1,"on-exceed":e.handleExceed}},[a("el-button",{attrs:{icon:"el-icon-upload2"}},[e._v("更新附件")])],1)],1)]),a("div",{staticClass:"buttons"},[a("el-button",{on:{click:function(t){e.AddNoticeVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{icon:"el-icon-download"},on:{click:e.download_document}},[e._v("下载附件 ")]),a("el-button",{attrs:{icon:"el-icon-delete"},on:{click:e.delete_document}},[e._v("删除附件 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.FixConfirm()}}},[e._v("修 改")])],1)])])])],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"notices_head"},[a("div",{staticClass:"text"},[e._v("通知栏")])])}],o=a("1da1"),s=(a("d3b7"),a("25f0"),a("fb6a"),a("ac1f"),a("1276"),a("b0c0"),a("96cf"),a("af2c")),c={data:function(){return{notices:[],noticetotal:0,current_page:1,loading:!0,autoplay:!0,interval:null,initialIndex:0,duration:null,playerOptions:{autoplay:!0,muted:!0,loop:!1,preload:"auto",language:"zh-CN",playbackRates:[.5,1,1.5,2],aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:"http://cgzh.njupt.edu.cn/video/1be4adf3d26d17ada66f1b2f4fdae7d4.mp4"}],notSupportedMessage:"此视频暂无法播放，请稍后再试"},AddNoticeVisible:!1,willadd_notice:{noticeTitle:"",content:"",publishUser:"",file:null},FixNoticeVisible:!1,willfix_notice:{noticeId:"",noticeTitle:"",content:""},attachmentId:""}},created:function(){this.refresh()},computed:{player:function(){return this.$refs.videoPlayer.player}},methods:{refresh:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,i="/notice/getNoticePage?currPage=1&size=5",t.next=4,a.getNotices(i);case 4:n=0;case 5:if(!(n<a.notices.length)){t.next=11;break}return t.next=8,a.getNotices_detail(a.notices[n].noticeId,n);case 8:n++,t.next=5;break;case 11:case"end":return t.stop()}}),t)})))()},getNotices:function(e){var t=this,a=this;a.notices=[],a.request(e,{},"GET",{}).then((function(e){if(console.log(e.data),a.loading=!1,"success"==e.data.status){a.noticetotal=e.data.data.total;for(var i=0;i<e.data.data.records.length;i++){var n={};n.index=i+1,n.noticeId=e.data.data.records[i].noticeId.toString(),n.createTime=e.data.data.records[i].createTime,n.updateTime=e.data.data.records[i].updateTime,n.noticeTitle=e.data.data.records[i].noticeTitle,n.publishUser=e.data.data.records[i].publishUser,n.content="",console.log(n),a.notices.push(n)}t.$message.success("通知公告已更新！")}else t.$message.error(e.data.data.errMsg)})).catch((function(e){console.log(e),t.$message.error("出错了！")}))},getNotices_detail:function(e,t){var a=this,i=this,n="/notice/getNoticeById?noticeId="+e;i.request(n,{},"GET",{}).then((function(e){"success"==e.data.status?i.notices[t].content=e.data.data.content:(a.$message.error(e.data.data.errMsg),i.notices[t].content=e.data.data.errMsg)})).catch((function(e){console.log(e),a.$message.error("出错了！")}))},handleCurrentChange:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e),i=t,n="/notice/getNoticePage?currPage="+e+"&size=5",a.next=5,i.getNotices(n);case 5:o=0;case 6:if(!(o<i.notices.length)){a.next=12;break}return a.next=9,i.getNotices_detail(i.notices[o].noticeId,o);case 9:o++,a.next=6;break;case 12:case"end":return a.stop()}}),a)})))()},upload_document:function(e){var t=this;console.log(e),t.willadd_notice.file=e.file},handleExceed:function(){this.$message.warning("一次只能上传一个文件")},AddConfirm:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,"pdf"==a.willadd_notice.file.name.split(".").slice(-1)){t.next=5;break}e.$message.error("上传文件只能是pdf格式!"),t.next=19;break;case 5:if(a.willadd_notice.file.size/1024/1024<10){t.next=9;break}e.$message.error("上传文件大小不能超过 10MB！"),t.next=19;break;case 9:return i="/notice/addNotice",n=new FormData,n.append("file",a.willadd_notice.file),n.append("content",a.willadd_notice.content),n.append("noticeTitle",a.willadd_notice.noticeTitle),n.append("publishUser",e.$store.state.signed_username),console.log(n),t.next=18,a.request(i,n,"POST",{}).then((function(t){console.log(t),"success"==t.data.status?(e.$message.success("新增成功！"),a.refresh()):e.$message.error(t.data.data.errMsg)})).catch((function(t){console.log(t),e.$message.error("出错了！")}));case 18:a.AddNoticeVisible=!1;case 19:case"end":return t.stop()}}),t)})))()},FixNotice:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t,console.log(e),i.willfix_notice.noticeId=e.noticeId,n="/notice/getNoticeById?noticeId="+e.noticeId,a.next=6,i.request(n,{},"GET",{}).then((function(e){console.log(e),"success"==e.data.status?(i.willfix_notice.noticeTitle=e.data.data.noticeTitle,i.willfix_notice.content=e.data.data.content,i.attachmentId=e.data.data.attachmentId,t.$message.success("修改成功！")):t.$message.error(e.data.data.errMsg)})).catch((function(e){console.log(e),t.$message.error("出错了！")}));case 6:i.FixNoticeVisible=!0;case 7:case"end":return a.stop()}}),a)})))()},download_document:function(){var e=this,t="/notice/downloadAttachment?attachmentId="+e.attachmentId;console.log(t),s["a"].downloadFiles(t)},update_document:function(e){var t=this,a=this;if(console.log(e),console.log(a.willfix_notice),"pdf"!=e.file.name.split(".").slice(-1))this.$message.error("上传文件只能是pdf格式!");else if(e.file.size/1024/1024<10){var i="/notice/updateNoticeAttachment",n=new FormData;n.append("file",e.file),n.append("noticeId",a.willfix_notice.noticeId),a.request(i,n,"POST",{}).then((function(e){"success"==e.data.status?(t.$message.success("更新附件成功！"),a.refresh(),a.FixNoticeVisible=!1):t.$message.error(e.data.data.errMsg)})).catch((function(e){console.log(e),t.$message.error("出错了！")}))}else this.$message.error("上传文件大小不能超过 10MB！")},delete_document:function(){var e=this,t=this,a="/notice/deleteNoticeAttachment?noticeId="+t.willfix_notice.noticeId;t.request(a,{},"GET",{}).then((function(a){console.log(a),"success"==a.data.status?(e.$message.success("删除成功！"),t.refresh(),t.FixNoticeVisible=!1):e.$message.error(a.data.data.errMsg)})).catch((function(t){console.log(t),e.$message.error("出错了！")}))},FixConfirm:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,console.log(a.willfix_notice),t.next=4,a.request("/notice/updateNotice",a.willfix_notice,"POST",{}).then((function(t){console.log(t),"success"==t.data.status?(e.$message.success("修改成功！"),a.refresh()):e.$message.error(t.data.data.errMsg)})).catch((function(t){console.log(t),e.$message.error("出错了！")}));case 4:a.FixNoticeVisible=!1;case 5:case"end":return t.stop()}}),t)})))()},DeleteNotice:function(e){var t=this,a=this;console.log(e),this.$confirm("此操作将永久删除该通知, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((function(){var i="/notice/deleteNoticeById?noticeId="+e.noticeId;a.request(i,{},"GET",{}).then((function(e){console.log(e),"success"==e.data.status?(t.$message.success("删除成功！"),a.refresh()):t.$message.error(e.data.data.errMsg)})).catch((function(e){console.log(e),t.$message.error("出错了！")}))})).catch((function(){t.$message.info("已取消操作！")}))},onPlayerEnded:function(e){this.autoplay=!0,this.interval=3e3},onPlayerLoadeddata:function(e){this.duration=e.cache_.duration},onPlayerPlay:function(e){e.play()}}},l=c,r=(a("c986"),a("2877")),d=Object(r["a"])(l,i,n,!1,null,null,null);t["default"]=d.exports},c986:function(e,t,a){"use strict";a("c613")}}]);