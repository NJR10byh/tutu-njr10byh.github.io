(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d1437b60"],{"8b78":function(e,t,a){},b011:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[["root","superadmin"].includes(this.$store.state.signed_authorize)?a("div",{staticClass:"UserList"},[a("div",{staticClass:"head-btn"},[a("div",{staticClass:"Search"}),a("div",{staticClass:"refresh_handle"},[a("div",{staticClass:"refresh"},[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){e.add_admin_dialog=!0}}},[e._v(" 添加管理员 ")])],1)])]),a("el-table",{ref:"multipleTable",staticClass:"tablestyle",staticStyle:{width:"100%"},attrs:{id:"outTable",data:e.tableData,"tooltip-effect":"dark",border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{prop:"userName",label:"姓名"}}),a("el-table-column",{attrs:{prop:"userGh",label:"工号"}}),a("el-table-column",{attrs:{prop:"authorize",label:"权限"}}),a("el-table-column",{attrs:{prop:"setting",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"setting"},[a("el-button",{attrs:{icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v(" 删除 ")])],1)]}}],null,!1,4128604754)})],1),a("el-dialog",{attrs:{title:"添加管理员",visible:e.add_admin_dialog,width:"30%","modal-append-to-body":!1},on:{"update:visible":function(t){e.add_admin_dialog=t}}},[a("el-form",{ref:"add_ruleForm",attrs:{model:e.willadd,rules:e.willadd_rules}},[a("el-form-item",{attrs:{label:"姓名",prop:"userName"}},[a("t-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.willadd.userName,callback:function(t){e.$set(e.willadd,"userName",t)},expression:"willadd.userName"}})],1),a("el-form-item",{attrs:{label:"工号",prop:"userGh"}},[a("t-input",{attrs:{placeholder:"请输入工号"},model:{value:e.willadd.userGh,callback:function(t){e.$set(e.willadd,"userGh",t)},expression:"willadd.userGh"}})],1),a("el-form-item",{attrs:{label:"所属单位",prop:"userDepartment"}},[a("t-input",{attrs:{placeholder:"请填写所属单位"},model:{value:e.willadd.userDepartment,callback:function(t){e.$set(e.willadd,"userDepartment",t)},expression:"willadd.userDepartment"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.add_admin_dialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addConfirm("add_ruleForm")}}},[e._v("添 加")])],1)],1)],1):a("div",[a("el-empty",{attrs:{description:"无权限"}},[a("t-button",{attrs:{theme:"primary",size:"large"},on:{click:e.RoleLow_back}},[e._v(" 返回 ")])],1)],1)])},r=[],l=(a("caad"),a("5f87")),i=(a("61f7"),{data:function(){return{tableData:[],total:0,add_admin_dialog:!1,willadd:{userName:"",userGh:"",userDepartment:""},willadd_rules:{userName:[{required:!1,message:"请填写姓名",trigger:"blur"}],userGh:[{required:!0,message:"请填写工号",trigger:"blur"}],userDepartment:[{required:!0,message:"请填写所属单位",trigger:"blur"}]}}},mounted:function(){Object(l["a"])()},created:function(){var e=this;setTimeout((function(){["root","superadmin"].includes(e.$store.state.signed_authorize)?e.refresh():e.$message.warning("权限不足！")}),300)},methods:{RoleLow_back:function(){window.history.back()},refresh:function(){var e=this,t=this;t.tableData=[],t.request("/admin/getAdminList",{},"GET",{}).then((function(a){if(console.log(a.data),"success"==a.data.status)for(var s=0;s<a.data.data.length;s++){var r={};r.index=s+1,r.userName=a.data.data[s].userName,r.userGh=a.data.data[s].userGh,r.authorize=a.data.data[s].role,t.tableData.push(r)}else e.$message.error(a.data.data.errMsg)})).catch((function(){e.$message.success("出错了！")}))},addConfirm:function(e){var t=this,a=this;console.log(a.willadd),this.$refs[e].validate((function(e){e?(console.log(t.add_ruleForm),a.request("/admin/addAdmin",a.willadd,"POST",{}).then((function(e){console.log(e.data),"success"==e.data.status?(t.$message.success("添加成功！"),a.refresh()):t.$message.error(e.data.data.errMsg)})).catch((function(e){console.log(e),t.$message.success("出错了！")})),a.add_admin_dialog=!1,a.refresh()):(console.log("error submit!!"),t.$notify.error({title:"错误",content:"请将必填字段填写完整！"}))}))},handleDelete:function(e){var t=this,a=this;console.log(e),this.$confirm("确定删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var s="/admin/deleteAdmin?userGh="+e.userGh;a.request(s,{},"GET",{}).then((function(e){console.log(e.data),"success"==e.data.status?(t.$message.success("已删除！"),a.refresh()):t.$message.error(e.data.data.errMsg)})).catch((function(){t.$message.success("出错了！")}))})).catch((function(){t.$message.info("取消操作！")}))}}}),n=i,o=(a("b129"),a("2877")),d=Object(o["a"])(n,s,r,!1,null,null,null);t["default"]=d.exports},b129:function(e,t,a){"use strict";a("8b78")}}]);