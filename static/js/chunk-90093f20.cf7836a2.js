(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-90093f20"],{"0b13":function(e,a,t){},"2a43":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"completed_Container"},[t("div",{staticClass:"head-btn"},[t("div",{staticClass:"Search"},[t("el-dropdown",{staticClass:"Dropdown",on:{command:e.handleDropdown}},[t("el-button",{attrs:{type:"primary"}},[e._v(" 查询字段"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"姓名"}},[e._v("姓名")]),t("el-dropdown-item",{attrs:{command:"专利名称"}},[e._v("专利名称")])],1)],1),t("el-input",{attrs:{placeholder:"请输入需要查询的内容"},model:{value:e.SearchText,callback:function(a){e.SearchText=a},expression:"SearchText"}},[t("template",{slot:"prepend"},[e._v(e._s(e.SearchType))])],2),t("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1),t("div",{staticClass:"newin_refresh"},[t("div",{staticClass:"refresh"},[t("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.refresh}},[e._v("刷新列表")])],1)])]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"tablestyle",staticStyle:{width:"100%"},attrs:{id:"outTable",data:e.tableData,"tooltip-effect":"dark",stripe:""}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[t("el-form-item",{attrs:{label:"专利号"}},[t("span",[e._v(e._s(a.row.zlh))])]),t("el-form-item",{attrs:{label:"专利名称"}},[t("span",[e._v(e._s(a.row.zlmc))])]),t("el-form-item",{attrs:{label:"授权编号"}},[t("span",[e._v(e._s(a.row.sqbh))])]),t("el-form-item",{attrs:{label:"归属单位"}},[t("span",[e._v(e._s(a.row.gsdw))])]),t("el-form-item",{attrs:{label:"所有权人"}},[t("span",[e._v(e._s(a.row.zlqr))])]),t("el-form-item",{attrs:{label:"立项编号"}},[t("span",[e._v(e._s(a.row.projectCode))])]),t("el-form-item",{attrs:{label:"批准日期"}},[t("span",[e._v(e._s(a.row.pzrq))])]),t("el-form-item",{attrs:{label:"转换状态"}},[t("span",[e._v(e._s(a.row.state))])]),t("el-form-item",{attrs:{label:"专利代理人"}},[t("span",[e._v(e._s(a.row.zldlr))])]),t("el-form-item",{attrs:{label:"专利第一作者姓名"}},[t("span",[e._v(e._s(a.row.zldyzzxm))])]),t("el-form-item",{attrs:{label:"专利第一作者工号"}},[t("span",[e._v(e._s(a.row.zldyzzgh))])]),t("el-form-item",{attrs:{label:"最后更新时间"}},[t("span",[e._v(e._s(a.row.zhgxsj))])])],1)]}}])}),t("el-table-column",{attrs:{prop:"index",label:"序号",width:"60"}}),t("el-table-column",{attrs:{prop:"zlmc",label:"专利名称"}}),t("el-table-column",{attrs:{prop:"projectCode",label:"立项编号",width:"100"}}),t("el-table-column",{attrs:{prop:"state",label:"转换状态",width:"100"}}),t("el-table-column",{attrs:{prop:"zhgxsj",label:"最后更新时间",width:"160"}}),t("el-table-column",{attrs:{prop:"setting",label:"操作",width:"490"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{icon:"el-icon-download"},on:{click:function(t){return e.downloadPdf(a.row,"Contract")}}},[e._v("下载合同")]),t("el-button",{attrs:{icon:"el-icon-download"},on:{click:function(t){return e.downloadPdf(a.row,"Voucher")}}},[e._v("下载到款凭证")]),t("el-button",{attrs:{icon:"el-icon-download"},on:{click:function(t){return e.downloadPdf(a.row,"Checklist")}}},[e._v("下载认定清单")]),t("el-button",{attrs:{icon:"el-icon-download"},on:{click:function(t){return e.downloadPdf(a.row,"Invoice")}}},[e._v("下载发票")])]}}])})],1),t("div",{staticClass:"PagesCurb"},[t("el-pagination",{staticClass:"pages",attrs:{currentPage:e.currentPage,"page-size":20,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentPage}})],1)],1)},s=[],o=t("1da1"),n=(t("ac1f"),t("1276"),t("d3b7"),t("3ca3"),t("ddb0"),t("2b3d"),t("96cf"),{data:function(){return{tableData:[],loading:!0,total:0,currentPage:1,Page_url:"",SearchType:"查询字段",SearchText:""}},created:function(){this.refresh()},methods:{refresh:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var t,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e,t.tableData=[],t.currentPage=1,t.SearchType="查询字段",t.SearchText="",console.log(e.$store.state),r="/process/getTransferredPatentPage?currPage="+t.currentPage+"&size=20",t.Page_url=r,a.next=10,t.getExam(r);case 10:case"end":return a.stop()}}),a)})))()},getExam:function(e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=a,t.next=3,r.request(e,{},"GET",{}).then((function(e){if(console.log(e.data),r.loading=!1,"success"==e.data.status){r.total=e.data.data.total;for(var t=0;t<e.data.data.records.length;t++){var s={};s.index=t+1,s.wid=e.data.data.records[t].wid,s.sqbh=e.data.data.records[t].sqbh,s.zlmc=e.data.data.records[t].zlmc,s.zlh=e.data.data.records[t].zlh,s.zlqr=e.data.data.records[t].zlqr,s.gsdw=e.data.data.records[t].gsdw,s.zhgxsj=null==e.data.data.records[t].transferProcess?e.data.data.records[t].zhgxsj:e.data.data.records[t].transferProcess.gmtUpdate,s.pzrq=e.data.data.records[t].pzrq,s.zldlr=e.data.data.records[t].zldlr,s.zldyzzgh=e.data.data.records[t].zldyzzgh,s.zldyzzxm=e.data.data.records[t].zldyzzxm,s.zlh=e.data.data.records[t].zlh,s.zlmc=e.data.data.records[t].zlmc,null==e.data.data.records[t].transferProcess?s.gmtUpdate=null:s.gmtUpdate=e.data.data.records[t].transferProcess.gmtUpdate,null==e.data.data.records[t].transferProcess?s.state="未转换":(s.transferProcessId=e.data.data.records[t].transferProcess.transferProcessId,e.data.data.records[t].transferProcess.isWithdraw?s.state="审批表已撤回":e.data.data.records[t].transferProcess.isZldyzzConfirm?e.data.data.records[t].transferProcess.isZldyzzApproval?e.data.data.records[t].transferProcess.isDepartmentConfirm?e.data.data.records[t].transferProcess.isDepartmentApproval?e.data.data.records[t].transferProcess.isComplete?(s.state="已转换",s.projectCode=e.data.data.records[t].transferProcess.projectCode):e.data.data.records[t].transferProcess.isCxyConfirm?e.data.data.records[t].transferProcess.isCxyApproval?(s.projectCode=e.data.data.records[t].transferProcess.projectCode,e.data.data.records[t].transferProcess.isPublicNotice?r.TimeDiffer(e.data.data.records[t].transferProcess.publicNoticeTime)?null==e.data.data.records[t].transferProcess.contractId?s.state="正在转换：等待上传合同":e.data.data.records[t].transferProcess.isContractSendBack&&null!=e.data.data.records[t].transferProcess.voucherId?null==e.data.data.records[t].transferProcess.checklistId?s.state="正在转换：等待上传认定清单（备案）":null==e.data.data.records[t].transferProcess.invoiceId?s.state="正在转换：等待上传发票":e.data.data.records[t].transferProcess.isComplete||(s.state="等待流程结束"):s.state="正在转换：等待合同寄回和上传到款凭证":s.state="正在转换：正在公示中":s.state="正在转换：等待公示"):s.state="产学研未通过":s.state="正在转换：等待产学研审批":s.state="归属单位未通过":s.state="正在转换：等待归属单位审批":s.state="第一作者未通过":s.state="正在转换：等待第一作者确认"),r.tableData.push(s)}a.$message({message:"数据已更新！",type:"success"})}else a.$message({message:e.data.data.errMsg,type:"error"})})).catch((function(e){console.log(e),r.loading=!1,a.$message({message:"出错了！",type:"error"})}));case 3:case"end":return t.stop()}}),t)})))()},handleCurrentPage:function(e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=a,r.loading=!0,console.log(r.Page_url),s=r.Page_url.split("currPage")[0]+"currPage="+e+"&size"+r.Page_url.split("size")[1],console.log(s),r.tableData=[],r.currentPage=e,t.next=9,r.getExam(s);case 9:case"end":return t.stop()}}),t)})))()},TimeTransfer:function(e){var a=new Date(e),t=a.getFullYear(),r=a.getMonth()+1,s=a.getDate(),o=a.getHours(),n=a.getMinutes(),c=a.getSeconds(),d=t+"-";return r<10&&(d+="0"),d+=r+"-",s<10&&(d+="0"),d+=s+" ",o<10&&(d+="0"),d+=o+":",n<10&&(d+="0"),d+=n+":",c<10&&(d+="0"),d+=c,d},TimeDiffer:function(e){var a=this.TimeTransfer(e),t=new Date,r=new Date(a),s=(t-r)/1e3,o=parseInt(s/86400);parseInt(s/3600),parseInt(s%3600/60),parseInt(s%60);return!0},handleDropdown:function(e){var a=this;a.SearchType=e},search:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var t,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t=e,t.loading=!0,"查询字段"!=t.SearchType){a.next=6;break}e.$message({message:"请填写查询字段！",type:"warning"}),a.next=24;break;case 6:if(""!=t.SearchText){a.next=10;break}e.$message({message:"请填写查询内容！",type:"warning"}),a.next=24;break;case 10:r="",t.tableData=[],t.currentPage=1,a.t0=t.SearchType,a.next="姓名"===a.t0?16:"专利名称"===a.t0?19:22;break;case 16:return r="/process/getTransferredPatentPageByProcessCreatorName?currPage="+t.currentPage+"&size=10&processCreatorName="+t.SearchText,t.Page_url=r,a.abrupt("break",23);case 19:return r="/process/getTransferredPatentPageByZLMC?currPage="+t.currentPage+"&size=10&zlmc="+t.SearchText,t.Page_url=r,a.abrupt("break",23);case 22:return a.abrupt("break",23);case 23:t.getExam(r);case 24:case"end":return a.stop()}}),a)})))()},downloadPdf:function(e,a){var t=this,r=this,s="",o="";switch(a){case"Contract":s="/transferring/downloadContract?transferProcessId="+e.transferProcessId,o="合同";break;case"Voucher":s="/transferring/downloadVoucher?transferProcessId="+e.transferProcessId,o="到款凭证";break;case"Checklist":s="/transferring/downloadChecklist?transferProcessId="+e.transferProcessId,o="备案清单";break;case"Invoice":s="/transferring/downloadInvoice?transferProcessId="+e.transferProcessId,o="发票";break;default:break}r.request(s,{},"GET",{},"blob").then((function(e){if(console.log(e),"application/json"==e.data.type)t.$message({message:"文件获取失败！",type:"error"});else try{var a=new Blob([e.data],{type:"application/pdf"}),r=URL.createObjectURL(a),s=document.createElement("a");s.href=r,s.setAttribute("download",o),document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(n){console.log(n),t.$message({message:"数据请求失败！",type:"error"})}})).catch((function(e){console.log(e),t.$message({message:"出错了！",type:"error"})}))}}}),c=n,d=(t("2d4a"),t("2877")),l=Object(d["a"])(c,r,s,!1,null,null,null);a["default"]=l.exports},"2d4a":function(e,a,t){"use strict";t("0b13")}}]);