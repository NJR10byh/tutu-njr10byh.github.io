(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-add8b238"],{"42e5":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"Files_VoucherList_Container"},[o("div",{staticClass:"top_buttons"},[e.multipleSelection.length>0?o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"el-icon-download"},on:{click:e.List_download}},[e._v(" 打包下载 ")]):e._e()],1),o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),o("el-table-column",{attrs:{prop:"file_name",label:"文件名"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticClass:"filebox"},[o("t-icon",{staticStyle:{color:"#E6A23C",width:"20px",height:"20px"},attrs:{name:"folder"}}),o("a",{on:{click:function(o){return e.openFiles(t.$index)}}},[e._v(e._s(t.row.file_name))])],1)]}}])})],1)],1)},i=[],n=o("5530"),l=o("2f62"),s=o("af2c"),c=o("5f87"),r={data:function(){return{tableData:[],loading:!0,multipleSelection:[],projectCode:this.$store.state.contract_files.projectCode,contractInfoId:this.$store.state.contract_files.contractInfoId}},mounted:function(){Object(c["a"])()},created:function(){console.log(this.$store.state);for(var e=0;e<this.$store.state.contract_files.patentList.length;e++){var t={};t.index=e,t.file_name=this.$store.state.contract_files.patentList[e].zlmc,this.tableData.push(t)}},methods:Object(n["a"])(Object(n["a"])({},Object(l["c"])(["get_files"])),{},{handleSelectionChange:function(e){this.multipleSelection=e},openFiles:function(e){console.log(e),this.$router.push({path:"./files_patents_detail",query:{index:e}})},List_download:function(){console.log(this.multipleSelection);for(var e=[],t=0;t<this.multipleSelection.length;t++){var o=this.$store.state.contract_files.patentList[this.multipleSelection[t].index];null!=o.certificate&&e.push(o.certificate.fileId),null!=o.oa&&e.push(o.oa.fileId),null!=o.tax&&e.push(o.tax.fileId)}console.log(e),s["a"].downloadFilePackage(this.projectCode,e)}})},d=r,p=(o("bae8"),o("2877")),f=Object(p["a"])(d,a,i,!1,null,null,null);t["default"]=f.exports},"803c":function(e,t,o){},af2c:function(e,t,o){"use strict";o("ac1f"),o("1276"),o("caad"),o("d3b7"),o("3ca3"),o("ddb0"),o("2b3d");var a=o("4ec3"),i=o("5c96"),n=o.n(i),l=function(e){var t="/file/downloadFileById?fileId="+e;Object(a["a"])(t,{},"GET",{},"arraybuffer").then((function(e){if(console.log(e),void 0==e.headers["content-disposition"])n.a.Notification({title:"错误",message:"文件可能丢失了！",type:"error"});else{var t="",o=e.headers["content-disposition"].split("fileName=")[1].split(".").length,a=e.headers["content-disposition"].split("fileName=")[1].split(".")[o-1];if(["pdf","png","jpg","jpeg"].includes(a)){switch(a){case"pdf":t="application/pdf";break;case"png":t="image/png";break;case"jpg":t="image/jpeg";break;case"jpeg":t="image/jpeg";break}var i=e.data,l=decodeURI(e.headers["content-disposition"].split("fileName=")[1]);if(window.navigator&&window.navigator.msSaveOrOpenBlob){var s=new Blob([i],{type:t});console.log(l),window.navigator.msSaveOrOpenBlob(s,l)}else{var c=new Blob([i],{type:t}),r=window.URL.createObjectURL(c);console.log(r),window.open(r)}}else n.a.Notification({title:"提示",message:"该文件类型暂不支持在线预览，请下载后查看！",type:"warning"})}})).catch((function(e){console.log(e),n.a.Message({message:"出错了！",type:"error"})}))},s=function(e){Object(a["a"])(e,{},"GET",{},"blob").then((function(t){if(console.log(t),void 0!=t.headers["content-disposition"]){n.a.Notification({title:"成功",message:"准备开始下载！",type:"success"});var o=decodeURI(t.headers["content-disposition"].split("fileName=")[1]);try{var i=new Blob([t.data],{type:"application/force-download"}),l=URL.createObjectURL(i),s=document.createElement("a");s.href=l,s.setAttribute("download",o),document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(c){console.log(c),n.a.Message({message:"数据请求失败！",type:"error"})}}else Object(a["a"])(e,{},"GET",{}).then((function(e){n.a.Message({message:e.data.data.errMsg,type:"error"})}))})).catch((function(e){console.log(e),n.a.Message({message:"出错了！",type:"error"})}))},c=function(e,t){var o="";if(0==t.length)n.a.Notification.warning({title:"提示",message:"文件为空！"});else{if(1==t.length)o="/file/downloadPackage?projectCode="+e+"&fileIdList="+t[0];else if(t.length>1){o="/file/downloadPackage?projectCode="+e+"&fileIdList="+t[0];for(var i=1;i<t.length;i++)o=o+"&fileIdList="+t[i]}Object(a["a"])(o,{},"GET",{},"blob").then((function(e){if(void 0!=e.headers["content-disposition"]){n.a.Notification({title:"成功",message:"准备开始下载！",type:"success"});var t=decodeURI(e.headers["content-disposition"].split("fileName=")[1]);try{var o=new Blob([e.data],{type:"application/force-download"}),a=URL.createObjectURL(o),i=document.createElement("a");i.href=a,i.setAttribute("download",t),document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(l){console.log(l),n.a.Message({message:"数据请求失败！",type:"error"})}}else n.a.Message({message:"文件可能丢失了！",type:"error"})})).catch((function(e){console.log(e),n.a.Message({message:"出错了！",type:"error"})}))}};t["a"]={previewFile:l,downloadFiles:s,downloadFilePackage:c}},bae8:function(e,t,o){"use strict";o("803c")}}]);