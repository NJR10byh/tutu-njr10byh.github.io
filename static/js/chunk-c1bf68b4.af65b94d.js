(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c1bf68b4"],{"2a79":function(e,t,i){e.exports=i.p+"static/img/file_pdf.1bf2177c.png"},9065:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"Files_Patents_Detail_Container"},[s("div",{staticClass:"top_buttons"},[s("el-button",{attrs:{icon:"el-icon-download"},on:{click:e.List_download}},[e._v(" 打包下载 ")])],1),s("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{prop:"file_name",label:"文件名"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"filebox"},[s("img",{attrs:{src:i("2a79")}}),s("a",{on:{click:function(i){return e.downloadFiles(t.row)}}},[e._v(e._s(t.row.file_name))])])]}}])}),s("el-table-column",{attrs:{prop:"fixtime",label:"修改时间"}})],1)],1)},a=[],o=i("5530"),l=(i("ac1f"),i("1276"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("2f62")),n={data:function(){return{tableData:[],loading:!0,multipleSelection:[],projectCode:this.$store.state.contract_files.projectCode}},created:function(){if(console.log(this.$route.query),null!=this.$store.state.contract_files.patentList[this.$route.query.index].certificate){var e={};e.file_name=this.$store.state.contract_files.patentList[this.$route.query.index].certificate.fileDisplayName,e.fixtime=this.$store.state.contract_files.patentList[this.$route.query.index].certificate.gmtCreate,e.fileId=this.$store.state.contract_files.patentList[this.$route.query.index].certificate.fileId,this.tableData.push(e)}if(null!=this.$store.state.contract_files.patentList[this.$route.query.index].oa){var t={};t.file_name=this.$store.state.contract_files.patentList[this.$route.query.index].oa.fileDisplayName,t.fixtime=this.$store.state.contract_files.patentList[this.$route.query.index].oa.gmtCreate,t.fileId=this.$store.state.contract_files.patentList[this.$route.query.index].oa.fileId,this.tableData.push(t)}if(null!=this.$store.state.contract_files.patentList[this.$route.query.index].tax){var i={};i.file_name=this.$store.state.contract_files.patentList[this.$route.query.index].tax.fileDisplayName,i.fixtime=this.$store.state.contract_files.patentList[this.$route.query.index].tax.gmtCreate,i.fileId=this.$store.state.contract_files.patentList[this.$route.query.index].tax.fileId,this.tableData.push(i)}},methods:Object(o["a"])(Object(o["a"])({},Object(l["c"])(["get_files"])),{},{handleSelectionChange:function(e){this.multipleSelection=e},downloadFiles:function(e){var t=this,i=this,s="/file/downloadFileById?fileId="+e.fileId;i.request(s,{},"GET",{},"blob").then((function(e){if(void 0!=e.headers["content-disposition"]){t.$notify({title:"成功",message:"准备开始下载！",type:"success"});var i=decodeURI(e.headers["content-disposition"].split("fileName=")[1]);try{var s=new Blob([e.data],{type:"application/force-download"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.setAttribute("download",i),document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch(l){console.log(l),t.$message({message:"数据请求失败！",type:"error"})}}else t.$message({message:"文件可能丢失了！",type:"error"})})).catch((function(e){console.log(e),t.$message({message:"出错了！",type:"error"})}))},List_download:function(){var e=this,t=this;if(console.log(this.multipleSelection),0==this.multipleSelection.length)this.$message.warning("请选择要下载的文件！");else{var i="/file/downloadPackage?projectCode="+this.projectCode+"&fileIdList="+this.multipleSelection[0].fileId;if(this.multipleSelection.length>1)for(var s=1;s<this.multipleSelection.length;s++)i=i+"&fileIdList="+this.multipleSelection[s].fileId;t.request(i,{},"GET",{},"blob").then((function(t){if(void 0!=t.headers["content-disposition"]){e.$notify({title:"成功",message:"准备开始下载！",type:"success"});var i=decodeURI(t.headers["content-disposition"].split("fileName=")[1]);try{var s=new Blob([t.data],{type:"application/force-download"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.setAttribute("download",i),document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch(l){console.log(l),e.$message({message:"数据请求失败！",type:"error"})}}else e.$message({message:"文件可能丢失了！",type:"error"})})).catch((function(t){console.log(t),e.$message({message:"出错了！",type:"error"})}))}}})},c=n,r=(i("fa15"),i("2877")),d=Object(r["a"])(c,s,a,!1,null,null,null);t["default"]=d.exports},b659:function(e,t,i){},fa15:function(e,t,i){"use strict";i("b659")}}]);